<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ä»Šå¤©åƒä»€éº¼ï¼Ÿè¼ªç›¤æ±ºå®šï¼</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css" />
    <style>
      #wheel {
        width: 300px;
        height: 300px;
        border: 10px solid #ccc;
        border-radius: 50%;
        margin: 2rem auto;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        text-align: center;
        background: conic-gradient(#f78ca0 0% 14.28%, #fbc7d4 14.28% 28.56%, #fceabb 28.56% 42.84%, #e0c3fc 42.84% 57.12%, #a1c4fd 57.12% 71.4%, #c2e9fb 71.4% 85.68%, #d4fc79 85.68% 100%);
        transition: transform 4s cubic-bezier(0.25, 0.1, 0.25, 1);
      }
      #pointer {
        position: absolute;
        top: 160px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 2rem;
        color: red;
      }
    </style>
  </head>
  <body>
    <nav class="container-fluid">
      <ul><li><strong>åƒä»€éº¼è¼ªç›¤</strong></li></ul>
    </nav>

    <main class="container">
      <div class="grid">
        <section>
          <hgroup>
            <h2>ä¸çŸ¥é“ä»Šå¤©è¦åƒä»€éº¼ï¼Ÿ</h2>
            <h3>é»ä¸€ä¸‹å¹«ä½ æ±ºå®šï¼</h3>
          </hgroup>

          <div id="pointer">â–¼</div>
          <div id="wheel">é»æˆ‘è½‰</div>

          <h3 id="result">ğŸ‘‰ ç­‰å¾…è½‰ç›¤çµæœ...</h3>
          <p><a id="mapLink" href="#" target="_blank">ğŸ” åœ¨ Google åœ°åœ–æœå°‹</a></p>

          <h3>è‡ªè¨‚ä½ çš„é¤é»é¸é …ï¼š</h3>
          <form id="customForm">
            <textarea id="customChoices" rows="4" placeholder="è¼¸å…¥é¸é …ï¼Œä»¥é€—è™Ÿåˆ†éš”ï¼Œå¦‚ï¼šæ‹‰éºµ,å£½å¸,ç‚¸é›" required></textarea>
            <button type="submit">æ›´æ–°é¸é …</button>
          </form>
        </section>
      </div>
    </main>

    <script>
      let choices = ['æ‹‰éºµ', 'ç¾©å¤§åˆ©éºµ', 'ä¾¿ç•¶', 'ç‰›æ’', 'ç«é‹', 'æ°´é¤ƒ', 'æ»·å‘³'];
      const wheel = document.getElementById('wheel');
      const result = document.getElementById('result');
      const mapLink = document.getElementById('mapLink');
      const form = document.getElementById('customForm');

      let spinning = false;

      wheel.addEventListener('click', () => {
        if (spinning) return;
        spinning = true;

        const randomIndex = Math.floor(Math.random() * choices.length);
        const currentRotation = wheel.style.transform ? 
          parseFloat(wheel.style.transform.replace(/[^\d.]/g, '')) || 0 : 0;
        const extraSpins = 360 * 5; // é¡å¤–æ—‹è½‰5åœˆ
        const targetAngle = (360 / choices.length) * randomIndex;
        const totalAngle = currentRotation + extraSpins + targetAngle;

        wheel.style.transform = `rotate(${totalAngle}deg)`;

        setTimeout(() => {
          const selected = choices[randomIndex];
          result.textContent = `ğŸ‰ ä»Šå¤©åƒï¼š${selected}`;
          mapLink.href = `https://www.google.com/maps/search/${encodeURIComponent(selected)}`;
          mapLink.textContent = `ğŸ” æœå°‹é™„è¿‘çš„ ${selected}`;
          spinning = false;
        }, 4000);
      });

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const input = document.getElementById('customChoices').value;
        const newChoices = input.split(',').map(item => item.trim()).filter(item => item);
        if (newChoices.length > 0) {
          choices = newChoices;
          alert('å·²æ›´æ–°é¸é …ï¼');
        } else {
          alert('è«‹è¼¸å…¥è‡³å°‘ä¸€å€‹é¸é …');
        }
      });
    </script>
  </body>
</html>
